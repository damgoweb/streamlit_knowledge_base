================================================================================
ğŸ“Š DATABASE STRUCTURE ANALYSIS
================================================================================

### 1. ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§
----------------------------------------

ğŸ“ categories (table)
   ğŸ“ é€šå¸¸ãƒ†ãƒ¼ãƒ–ãƒ«

ğŸ“ search_history (table)
   ğŸ“ é€šå¸¸ãƒ†ãƒ¼ãƒ–ãƒ«

ğŸ“ snippets (table)
   ğŸ“ é€šå¸¸ãƒ†ãƒ¼ãƒ–ãƒ«

ğŸ“ snippets_fts (table)
   âš¡ ä»®æƒ³ãƒ†ãƒ¼ãƒ–ãƒ« (FTS5)

ğŸ“ snippets_fts_config (table)
   ğŸ“ é€šå¸¸ãƒ†ãƒ¼ãƒ–ãƒ«

ğŸ“ snippets_fts_content (table)
   ğŸ“ é€šå¸¸ãƒ†ãƒ¼ãƒ–ãƒ«

ğŸ“ snippets_fts_data (table)
   ğŸ“ é€šå¸¸ãƒ†ãƒ¼ãƒ–ãƒ«

ğŸ“ snippets_fts_docsize (table)
   ğŸ“ é€šå¸¸ãƒ†ãƒ¼ãƒ–ãƒ«

ğŸ“ snippets_fts_idx (table)
   ğŸ“ é€šå¸¸ãƒ†ãƒ¼ãƒ–ãƒ«

ğŸ“ sqlite_sequence (table)
   ğŸ“ é€šå¸¸ãƒ†ãƒ¼ãƒ–ãƒ«

================================================================================
### 2. å„ãƒ†ãƒ¼ãƒ–ãƒ«ã®è©³ç´°æ§‹é€ 
----------------------------------------

ğŸ” categories
----------------------------------------
CREATEæ–‡:
CREATE TABLE categories (
                        id INTEGER PRIMARY KEY AUTOINCREMENT,
                        name TEXT UNIQUE NOT NULL,
                        icon TEXT DEFAULT 'ğŸ“',
                        display_order INTEGER DEFAULT 0
                    )

ã‚«ãƒ©ãƒ æ§‹é€ :
ID    åå‰                   å‹               NULL   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ           PK
--------------------------------------------------------------------------------
0     id                   INTEGER         YES                    PK
1     name                 TEXT            NO                     
2     icon                 TEXT            YES    'ğŸ“'             
3     display_order        INTEGER         YES    0               

ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 7

ğŸ” search_history
----------------------------------------
CREATEæ–‡:
CREATE TABLE search_history (
                        id INTEGER PRIMARY KEY AUTOINCREMENT,
                        query TEXT NOT NULL,
                        searched_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                        result_count INTEGER DEFAULT 0
                    )

ã‚«ãƒ©ãƒ æ§‹é€ :
ID    åå‰                   å‹               NULL   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ           PK
--------------------------------------------------------------------------------
0     id                   INTEGER         YES                    PK
1     query                TEXT            NO                     
2     searched_at          TIMESTAMP       YES    CURRENT_TIMESTAMP 
3     result_count         INTEGER         YES    0               

ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 106

ğŸ” snippets
----------------------------------------
CREATEæ–‡:
CREATE TABLE snippets (
                        id INTEGER PRIMARY KEY AUTOINCREMENT,
                        title TEXT NOT NULL,
                        content TEXT NOT NULL,
                        category TEXT NOT NULL,
                        tags TEXT,
                        description TEXT,
                        language TEXT DEFAULT 'text',
                        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                        usage_count INTEGER DEFAULT 0,
                        is_favorite INTEGER DEFAULT 0,
                        CHECK (language IN ('text', 'bash', 'python', 'sql', 
                                          'javascript', 'yaml', 'json', 
                                          'dockerfile', 'conf', 'xml'))
                    )

ã‚«ãƒ©ãƒ æ§‹é€ :
ID    åå‰                   å‹               NULL   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ           PK
--------------------------------------------------------------------------------
0     id                   INTEGER         YES                    PK
1     title                TEXT            NO                     
2     content              TEXT            NO                     
3     category             TEXT            NO                     
4     tags                 TEXT            YES                    
5     description          TEXT            YES                    
6     language             TEXT            YES    'text'          
7     created_at           TIMESTAMP       YES    CURRENT_TIMESTAMP 
8     updated_at           TIMESTAMP       YES    CURRENT_TIMESTAMP 
9     usage_count          INTEGER         YES    0               
10    is_favorite          INTEGER         YES    0               

ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 99

ğŸ” snippets_fts
----------------------------------------
CREATEæ–‡:
CREATE VIRTUAL TABLE snippets_fts USING fts5(
            title, 
            content, 
            tags, 
            description
        )


ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 99

ğŸ” snippets_fts_config
----------------------------------------
CREATEæ–‡:
CREATE TABLE 'snippets_fts_config'(k PRIMARY KEY, v) WITHOUT ROWID

ã‚«ãƒ©ãƒ æ§‹é€ :
ID    åå‰                   å‹               NULL   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ           PK
--------------------------------------------------------------------------------
0     k                                    NO                     PK
1     v                                    YES                    

ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 1

ğŸ” snippets_fts_content
----------------------------------------
CREATEæ–‡:
CREATE TABLE 'snippets_fts_content'(id INTEGER PRIMARY KEY, c0, c1, c2, c3)

ã‚«ãƒ©ãƒ æ§‹é€ :
ID    åå‰                   å‹               NULL   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ           PK
--------------------------------------------------------------------------------
0     id                   INTEGER         YES                    PK
1     c0                                   YES                    
2     c1                                   YES                    
3     c2                                   YES                    
4     c3                                   YES                    

ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 99

ğŸ” snippets_fts_data
----------------------------------------
CREATEæ–‡:
CREATE TABLE 'snippets_fts_data'(id INTEGER PRIMARY KEY, block BLOB)

ã‚«ãƒ©ãƒ æ§‹é€ :
ID    åå‰                   å‹               NULL   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ           PK
--------------------------------------------------------------------------------
0     id                   INTEGER         YES                    PK
1     block                BLOB            YES                    

ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 20

ğŸ” snippets_fts_docsize
----------------------------------------
CREATEæ–‡:
CREATE TABLE 'snippets_fts_docsize'(id INTEGER PRIMARY KEY, sz BLOB)

ã‚«ãƒ©ãƒ æ§‹é€ :
ID    åå‰                   å‹               NULL   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ           PK
--------------------------------------------------------------------------------
0     id                   INTEGER         YES                    PK
1     sz                   BLOB            YES                    

ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 99

ğŸ” snippets_fts_idx
----------------------------------------
CREATEæ–‡:
CREATE TABLE 'snippets_fts_idx'(segid, term, pgno, PRIMARY KEY(segid, term)) WITHOUT ROWID

ã‚«ãƒ©ãƒ æ§‹é€ :
ID    åå‰                   å‹               NULL   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ           PK
--------------------------------------------------------------------------------
0     segid                                NO                     PK
1     term                                 NO                     PK
2     pgno                                 YES                    

ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 18

ğŸ” sqlite_sequence
----------------------------------------
CREATEæ–‡:
CREATE TABLE sqlite_sequence(name,seq)

ã‚«ãƒ©ãƒ æ§‹é€ :
ID    åå‰                   å‹               NULL   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ           PK
--------------------------------------------------------------------------------
0     name                                 YES                    
1     seq                                  YES                    

ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°: 3

================================================================================
### 3. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä¸€è¦§
----------------------------------------

ğŸ“ idx_snippets_category (on snippets)
   CREATE INDEX idx_snippets_category 
                    ON snippets(category)
                

ğŸ“ idx_snippets_favorite (on snippets)
   CREATE INDEX idx_snippets_favorite 
                    ON snippets(is_favorite DESC)
                

ğŸ“ idx_snippets_updated (on snippets)
   CREATE INDEX idx_snippets_updated 
                    ON snippets(updated_at DESC)
                

ğŸ“ idx_snippets_usage (on snippets)
   CREATE INDEX idx_snippets_usage 
                    ON snippets(usage_count DESC)
                

================================================================================
### 4. ãƒˆãƒªã‚¬ãƒ¼ä¸€è¦§
----------------------------------------

âš¡ snippets_fts_delete (on snippets)
   ç›®çš„: snippetsãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›´ã‚’FTSãƒ†ãƒ¼ãƒ–ãƒ«ã«åæ˜ 

âš¡ snippets_fts_insert (on snippets)
   ç›®çš„: snippetsãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›´ã‚’FTSãƒ†ãƒ¼ãƒ–ãƒ«ã«åæ˜ 

âš¡ snippets_fts_update (on snippets)
   ç›®çš„: snippetsãƒ†ãƒ¼ãƒ–ãƒ«ã®å¤‰æ›´ã‚’FTSãƒ†ãƒ¼ãƒ–ãƒ«ã«åæ˜ 

================================================================================
### 5. FTSï¼ˆå…¨æ–‡æ¤œç´¢ï¼‰ãƒ†ãƒ¼ãƒ–ãƒ«ã®èª¬æ˜
----------------------------------------

FTSãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¤ã„ã¦:
- snippets_fts ã¯å…¨æ–‡æ¤œç´¢ç”¨ã®ä»®æƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã§ã™
- SQLite FTS5 (Full-Text Search) ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ä½¿ç”¨
- snippetsãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä¿æŒ
- é«˜é€Ÿãªå…¨æ–‡æ¤œç´¢ã‚’å¯èƒ½ã«ã—ã¾ã™

é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«:
- snippets_fts_* : FTS5ãŒå†…éƒ¨çš„ã«ä½œæˆã™ã‚‹è£œåŠ©ãƒ†ãƒ¼ãƒ–ãƒ«
  - snippets_fts_data: å®Ÿéš›ã®å…¨æ–‡æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ‡ãƒ¼ã‚¿
  - snippets_fts_idx: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ§‹é€ 
  - snippets_fts_content: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‚ç…§ï¼ˆä½¿ç”¨ã•ã‚Œãªã„å ´åˆã‚‚ã‚ã‚‹ï¼‰
  - snippets_fts_docsize: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚µã‚¤ã‚ºæƒ…å ±
  - snippets_fts_config: FTSè¨­å®šæƒ…å ±

ã“ã‚Œã‚‰ã¯è‡ªå‹•çš„ã«ç®¡ç†ã•ã‚Œã‚‹ãŸã‚ã€ç›´æ¥æ“ä½œã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
    

================================================================================
### 6. ãƒ‡ãƒ¼ã‚¿é‡è¤‡ãƒã‚§ãƒƒã‚¯
----------------------------------------
âœ… snippetsãƒ†ãƒ¼ãƒ–ãƒ«ã«é‡è¤‡ãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã›ã‚“

================================================================================
### 7. æ¨å¥¨äº‹é …
----------------------------------------

1. FTSé–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆsnippets_fts_*ï¼‰ã¯è‡ªå‹•ç®¡ç†ã•ã‚Œã‚‹ãŸã‚è§¦ã‚‰ãªã„
2. ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ãƒ»æ›´æ–°ãƒ»å‰Šé™¤ã¯ snippets ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã—ã¦ã®ã¿è¡Œã†
3. ãƒˆãƒªã‚¬ãƒ¼ãŒè‡ªå‹•çš„ã«FTSã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ›´æ–°
4. æ¤œç´¢æ™‚ã¯FTSãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã¨é«˜é€Ÿï¼ˆãŸã ã—ç¾åœ¨ã¯ç„¡åŠ¹åŒ–ä¸­ï¼‰
5. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ™‚ã¯ snippets, categories, search_history ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã¿ã§ååˆ†
    
